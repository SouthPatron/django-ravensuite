{% load decshift %}
{% load sourcedoc %}
<div id="dialog-form" title="Allocate Payment">
	<p class="validateTips">All form fields are required</p>
	<form id="allocate-new-form" method="POST" action="{% url org-client-account-payment-component-allocate-payment kwargs.oid kwargs.cid kwargs.sdid %}">
		{% csrf_token %}

		<div id="dialog-text">&nbsp;</div>


		<input type="hidden" name="invoice-refnum" id="id-invoice-refnum" value="-1"/>
		<input type="hidden" id="id-invoice-total" value="0"/>
		<input type="hidden" id="id-invoice-unpaid" value="0"/>
		<input type="hidden" id="id-invoice-invoice-date" value="Today"/>
		<input type="hidden" id="id-invoice-due-date" value="Today"/>
	</form>
</div>

<div id="dialog-form-one">
	<div>List of unpaid invoices:</div>

	<fieldset>

	<table class="payment-table-list">
		<thead>
			<tr>
				<th>Ref Num</th>
				<th>Invoice Date</th>
				<th>Due Date</th>
				<th class="numeric">Total</th>
				<th class="numeric">Oustanding</th>
			</tr>
		</thead>
		<tbody>
			{% for obj in instance.client.get_unpaid_invoice_list %}
			{% get_document_obj obj as doc %}
			<tr class="payment-line">
				<td class="first">{{ obj.refnum }}</td>
				<td class="first">{{ doc.getSpecs.getInvoiceDate|date:"j M Y" }}</td>
				<td>{{ doc.getSpecs.getDueDate|date:"j M Y" }}</td>
				<td class="numeric">{{ doc.getTotals.getTotal|decsplay }}</td>
				<td class="numeric">{{ doc.getTotals.getUnallocated|decsplay }}</td>

				<input class="refnum" type="hidden" value="{{ obj.refnum }}"/>
				<input class="total" type="hidden" value="{{ doc.getTotals.getTotal|decsplay }}"/>
				<input class="invoice-date" type="hidden" value="{{ doc.getSpecs.getInvoiceDate|date:"j M Y" }}"/>
				<input class="due-date" type="hidden" value="{{ doc.getSpecs.getDueDate|date:"j M Y" }}"/>
				<input class="unpaid" type="hidden" value="{{ doc.getTotals.getUnallocated|decsplay }}"/>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	</fieldset>
</div>
	

<div id="dialog-form-two">
	<div class="payment-amount-selection">
	<fieldset>

		<table>
			<tbody>


				<tr class="reference-row">
					<td class="col1">Reference:</td>
					<td class="col2"><span id="id-text-refnum">0</span></td>
				</tr>

				<tr class="date-row">
					<td class="col1">Invoice Date:</td>
					<td class="col2"><span id="id-text-invoice-date">Today</span></td>
				</tr>

				<tr class="date-row">
					<td class="col1">Due Date:</td>
					<td class="col2"><span id="id-text-due-date">Today</span></td>
				</tr>


				<tr class="amount-row">
					<td class="col1">Amount:</td>
					<td class="col2"><span id="id-text-total">0.00</span>
</td>
				</tr>

				<tr class="oustanding-row">
					<td class="col1">Outstanding Invoice Amount:</td>
					<td class="col2"><span id="id-text-unpaid">0.00</span>
</td>
				</tr>

				<tr class="available-row">
					<td class="col1">Available to Allocate:</td>
					<td class="col2"><span id="id-text-unpaid">0.00</span>
</td>
				</tr>

				<tr class="allocate-row">
					<td class="col1">How much do you want to allocate?</td>
					<td class="col2">
						<input type="text" name="payment-amount" id="id-payment-amount" value="-1"/>
					</td>
				</tr>

			</tbody>
		</table>

	</fieldset>
	</div>
</div>


