<html>
<head>
	<title>Afes Table - Example - Simple Table</title>

	<script type="text/javascript" src="../../../external/jquery/jquery.js"></script>
	<script type="text/javascript" src="../afes.js"></script>
	<script type="text/javascript" src="../afes-table.js"></script>

<style type="text/css">

.afes-table
{
	width: 100%;
}

.afes-table thead
{
	border-bottom: 1px solid #707070;
}

.afes-table-head-cell
{
	text-align: left;
	padding: 5px 5px;
	background-color: #ffffff;
}

.afes-table-body-row
{
	border-left: 1px solid #d8d8d8;
}

.afes-table-body-cell
{
	text-align: left;
	padding: 5px 5px;
	background-color: #ffffff;
	border-right: 1px solid #d8d8d8;
	border-bottom: 1px solid #c8c8c8;
	overflow: hidden;
}

.afes-table-body-cell input
{
	border: 0px solid black;
	width: 100%;
}

.afes-table-body-cell input:focus,
.afes-table-body-cell select:focus
{
	outline:none;
	font: inherit;
}


.afes-table-body-cell-type-currency,
.afes-table-body-cell-type-currency input
{
	text-align: right;
	padding-right: 8px;
}

.afes-table-body-cell-type-select select
{
	width: 100%;
}

.description.afes-table-body-cell {
}


#id_table thead .head-description { width: 235px; }
#id_table thead .head-qty { width: 123px; }
#id_table thead .head-unit-price { width: 147px; }
#id_table thead .head-tax-rate { width: 195px; }
#id_table thead .head-amount { width: 158px; }
#id_table thead .head-delete { width: 20px; }

		
</style>
</head>

<body>

<div>
	<h1>Simple Table</h1>

<div id="click_me_div" style=" visible: hidden; display: none; ">
<a class='delete-me-click' href='#'>X</a>
</div>


<table id="id_table">
<thead>
	<th class="head-description">Description</th>
	<th class="head-qty">Qty</th>
	<th class="head-unit-price">Unit Price</th>
	<th class="head-tax-rate">Tax Rate</th>
	<th class="head-amount">Amount</th>
	<th class="head-delete">Delete</th>
</thead>
<tbody>
</tbody>
</table>

</div>



<script language="javascript">



	myhooks = {
		onUpdate : function( event, oldVal, newVal ) {
			var qty = $(this).parents( ".afes-table-body-row" ).first().find( ".qty" );
			var price = $(this).parents( ".afes-table-body-row" ).first().find( ".unit-price" );


			var nqt = ( new Number( newVal ) );
			if ( ! isNaN( qty.text() ) )
				nqt = ( new Number( qty.text() ) );

			var npr = ( new Number( newVal ) );
			if ( ! isNaN( price.text() ) )
				npr = ( new Number( price.text() ) );
			
			var amt = nqt * npr;


			$(this).parents( ".afes-table-body-row" ).first().find( "td.amount" ).html( amt.toFixed(2) );
			$(this).parents( ".afes-table-body-row" ).first().find( "div.amount input" ).val( amt.toFixed(2) );


			return true;
		}
	};


	afes.ex.table.init(
		$( "#id_table" ),
		{
			initial_rows : 10,
			max_rows : 15,
			action_on_final_next : "extend",

			columns : [

				{
					type: "text",
					initial: "",
					class: "description",
					form_name : "description"
				},

				{
					type: "currency",
					initial: "0.00",
					class: "qty",
					callbacks : myhooks,
					form_name : "qty"
				},

				{
					type: "currency",
					initial: "0.00",
					class: "unit-price",
					callbacks : myhooks,
					form_name : "price"
				},

				{
					type: "select",
					options : {
						"No Tax" : 0,
						"Tax Inclusive" : 1,
						"Tax Exclusive" : 2,
						"Tax Exempt" : 3,
					},
					initial: "Tax Exclusive",
					class: "tax-rate",
					form_name : "tax-rate"
				},

				{
					type: "currency",
					initial: "0.00",
					class: "amount",
					editable : false,
					form_name : "amount"
				},

				{
					type: "text",
					initial: $( "#click_me_div" ).html(),
					class: "delete",
					editable : false
				}


			]
		}
	);


	afes.ex.table.insertRow( "#id_table", 
				[ 
					"description one",
					"60.00",
					"100.00",
					"Tax Exempt",
					"6000.00",
					$( "#click_me_div" ).html()
				],
				1
			);

	afes.ex.table.insertRow( "#id_table", 
			[ 
					"description two",
					"60.00",
					"100.00",
					"Tax Inclusive",
					"6000.00",
					$( "#click_me_div" ).html()
			],
			0
		);



	$( ".delete-me-click" ).click( function(){
		$( this ).parents("tr").first().remove();
	});



</script>

</body>
</html>


